<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>WordSpark Etymology</title>
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #0f0e0c;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef, useCallback } = React;

    /* ═══════════════════════════════════════════════════════════════════════════
       WORD DATABASE — 40 WORDS WITH FULL ETYMOLOGY
       ═══════════════════════════════════════════════════════════════════════════ */
    const WORD_BANK = [
      { word:"ephemeral", def:"Lasting for a very short time", pos:"adj", ipa:"/ɪˈfɛm.ər.əl/", origin:"Greek", year:"1560s", etymology:"From Greek ephēmeros — 'lasting only a day'", roots:[{part:"epi-",meaning:"upon",lang:"Greek"},{part:"hēmera",meaning:"day",lang:"Greek"}], evolution:["ephēmeros (Grk)","ephemerus (Lat)","éphémère (Fr)","ephemeral"], relatives:["ephemera","ephemeris"], funFact:"Originally a medical term for fevers lasting only a day. Mayflies (Ephemeroptera) live just 24 hours as adults." },
      { word:"mellifluous", def:"Sweet-sounding; pleasant to hear", pos:"adj", ipa:"/mɛˈlɪf.lu.əs/", origin:"Latin", year:"1400s", etymology:"From Latin mellifluus — 'flowing with honey'", roots:[{part:"mel",meaning:"honey",lang:"Latin"},{part:"fluere",meaning:"to flow",lang:"Latin"}], evolution:["mellifluus (Lat)","mellifluous (Eng)"], relatives:["fluent","fluid","confluence","superfluous"], funFact:"The root 'mel' also gives us 'molasses' (via Portuguese) and 'marmalade' (via Greek melimelon, 'honey apple')." },
      { word:"serendipity", def:"Happy discoveries made by chance", pos:"noun", ipa:"/ˌsɛr.ənˈdɪp.ɪ.ti/", origin:"English (coined)", year:"1754", etymology:"Coined by Horace Walpole from 'The Three Princes of Serendip'", roots:[{part:"Serendip",meaning:"old name for Sri Lanka",lang:"Persian"},{part:"-ity",meaning:"quality of",lang:"Latin suffix"}], evolution:["Sarandīb (Arabic)","Serendip (Persian)","serendipity (1754)"], relatives:["serendipitous"], funFact:"One of few English words with a precise birthday: January 28, 1754, in a letter by Walpole." },
      { word:"sycophant", def:"A person who flatters to gain advantage", pos:"noun", ipa:"/ˈsɪk.ə.fænt/", origin:"Greek", year:"1530s", etymology:"From Greek sykophantēs — literally 'one who shows the fig'", roots:[{part:"sykon",meaning:"fig",lang:"Greek"},{part:"phainein",meaning:"to show",lang:"Greek"}], evolution:["sykophantēs (Grk)","sycophanta (Lat)","sycophant"], relatives:["sycophancy","epiphany","phenomenon","phantom"], funFact:"One theory: exporting figs from Athens was illegal, and informers who reported violators were called 'fig-showers.'" },
      { word:"nostalgia", def:"A sentimental longing for the past", pos:"noun", ipa:"/nɒˈstæl.dʒə/", origin:"Greek (coined)", year:"1688", etymology:"Coined by Swiss physician Johannes Hofer as a medical diagnosis for severe homesickness", roots:[{part:"nostos",meaning:"homecoming",lang:"Greek"},{part:"algos",meaning:"pain",lang:"Greek"}], evolution:["nostos + algos (Grk)","nostalgia (New Latin, 1688)","nostalgia (Eng)"], relatives:["nostalgic","neuralgia","analgesic"], funFact:"Originally a real medical condition! Swiss soldiers abroad were prescribed opium, leeches, and trips to the Alps." },
      { word:"algorithm", def:"A process or set of rules for problem-solving", pos:"noun", ipa:"/ˈæl.ɡə.rɪð.əm/", origin:"Arabic", year:"1200s", etymology:"From the Latinized name of Persian mathematician al-Khwārizmī", roots:[{part:"al-Khwārizmī",meaning:"the one from Khwarezm (Uzbekistan)",lang:"Arabic"}], evolution:["al-Khwārizmī (Arabic)","algorismus (Med. Latin)","algorithm (Eng)"], relatives:["algebra","algorism","arithmetic"], funFact:"Al-Khwārizmī's 9th-century book was so influential his name became the word for mathematical procedures. His other book gave us 'algebra.'" },
      { word:"lunatic", def:"Wildly foolish or mentally unstable", pos:"noun/adj", ipa:"/ˈluː.nə.tɪk/", origin:"Latin", year:"1290s", etymology:"From Latin lunaticus — 'moon-struck'", roots:[{part:"luna",meaning:"the moon",lang:"Latin"},{part:"-aticus",meaning:"pertaining to",lang:"Latin"}], evolution:["luna (Lat)","lunaticus (Lat)","lunatique (OFr)","lunatic"], relatives:["lunar","lunacy","sublunary"], funFact:"English law once defined a lunatic as someone who lost reason 'upon the full of the moon.' Studies show no real correlation." },
      { word:"disaster", def:"A sudden event causing great damage", pos:"noun", ipa:"/dɪˈzæs.tər/", origin:"Italian/Greek", year:"1590s", etymology:"From Italian disastro — literally 'ill-starred'", roots:[{part:"dis-",meaning:"away, negation",lang:"Latin"},{part:"astro",meaning:"star",lang:"Greek"}], evolution:["astron (Grk)","disastro (Ital)","désastre (Fr)","disaster"], relatives:["asteroid","astronomy","astrology","astronaut"], funFact:"Reflects the belief that stars governed fate. Shakespeare's King Lear blames 'these late eclipses' for social chaos." },
      { word:"quarantine", def:"Isolation to prevent spread of disease", pos:"noun", ipa:"/ˈkwɒr.ən.tiːn/", origin:"Italian", year:"1660s", etymology:"From Italian quarantina — 'space of forty days'", roots:[{part:"quaranta",meaning:"forty",lang:"Italian"},{part:"-ina",meaning:"period of",lang:"Italian"}], evolution:["quadraginta (Lat)","quaranta (Ital)","quarantina","quarantine"], relatives:["quarter","quadrant","quaternary"], funFact:"During the Black Death, Venice required ships to anchor 40 days before landing. Why 40? Possibly biblical — Moses, Jesus both had 40-day trials." },
      { word:"sarcasm", def:"Irony used to mock or convey contempt", pos:"noun", ipa:"/ˈsɑːr.kæz.əm/", origin:"Greek", year:"1570s", etymology:"From Greek sarkasmos — 'to tear flesh, gnash teeth'", roots:[{part:"sarx",meaning:"flesh",lang:"Greek"},{part:"sarkazein",meaning:"to strip off flesh",lang:"Greek"}], evolution:["sarkazein (Grk)","sarkasmos (Grk)","sarcasmus (Lat)","sarcasm"], relatives:["sarcastic","sarcophagus","sarcoma"], funFact:"Sarcophagus ('flesh-eater') shares the same root — the limestone was believed to decompose bodies. Sarcasm and sarcophagus: etymological cousins." },
      { word:"clue", def:"Evidence that helps solve a mystery", pos:"noun", ipa:"/kluː/", origin:"Greek myth", year:"1590s", etymology:"From 'clew,' a ball of thread — referencing Theseus and the Minotaur", roots:[{part:"clew",meaning:"ball of yarn",lang:"Old English"}], evolution:["cliwen (OE)","clewe (Mid.Eng)","clew/clue (figurative)"], relatives:["clew (nautical)","unravel"], funFact:"Theseus navigated the Minotaur's labyrinth by unwinding a 'clew' of thread. A 'clue' literally guides you through a maze of confusion." },
      { word:"salary", def:"A fixed regular payment for work", pos:"noun", ipa:"/ˈsæl.ər.i/", origin:"Latin", year:"1300s", etymology:"From Latin salarium — 'salt money' paid to Roman soldiers", roots:[{part:"sal",meaning:"salt",lang:"Latin"},{part:"-arium",meaning:"connected to",lang:"Latin"}], evolution:["sal (Lat)","salarium (Lat)","salaire (OFr)","salary"], relatives:["saline","salad","sauce","sausage"], funFact:"Roman soldiers were partly paid in salt — it was crucial for food preservation. 'Worth his salt' comes from this same idea." },
      { word:"muscle", def:"Fibrous tissue that contracts for movement", pos:"noun", ipa:"/ˈmʌs.əl/", origin:"Latin", year:"1530s", etymology:"From Latin musculus — literally 'little mouse'", roots:[{part:"mus",meaning:"mouse",lang:"Latin"},{part:"-culus",meaning:"little",lang:"Latin"}], evolution:["mus (Lat)","musculus (Lat)","muscle (OFr)","muscle"], relatives:["mussel","mouse","muscular"], funFact:"Romans thought a flexing bicep looked like a mouse running under skin. Greeks agreed — mys meant both 'mouse' and 'muscle.' Mussel the shellfish: also mouse-shaped." },
      { word:"psychology", def:"The study of mind and behavior", pos:"noun", ipa:"/saɪˈkɒl.ə.dʒi/", origin:"Greek", year:"1650s", etymology:"From Greek psykhē (soul/mind) + logos (study)", roots:[{part:"psykhē",meaning:"soul, breath of life",lang:"Greek"},{part:"logos",meaning:"study, reason",lang:"Greek"}], evolution:["psykhē + logos (Grk)","psychologia (New Lat)","psychology"], relatives:["psyche","psychiatry","psychedelic","logic"], funFact:"Psykhē means 'breath' — Greeks equated breath with the soul, since it leaves at death. In myth, Psyche was a mortal whose name became synonymous with the human soul." },
      { word:"toxic", def:"Poisonous; harmful or destructive", pos:"adj", ipa:"/ˈtɒk.sɪk/", origin:"Greek", year:"1660s", etymology:"From Greek toxikon pharmakon — 'poison for arrows'", roots:[{part:"toxon",meaning:"bow (archery)",lang:"Greek"},{part:"-ikon",meaning:"pertaining to",lang:"Greek"}], evolution:["toxon (Grk)","toxikon (Grk)","toxicum (Lat)","toxic"], relatives:["toxin","toxicology","intoxicate"], funFact:"The word for 'poison' comes from 'bow' — Scythians coated arrowheads in poison. 'Intoxicate' literally means 'to put arrow-poison into' someone." },
      { word:"trivial", def:"Of little value or importance", pos:"adj", ipa:"/ˈtrɪv.i.əl/", origin:"Latin", year:"1430s", etymology:"From Latin trivialis — 'found at the crossroads, commonplace'", roots:[{part:"tri-",meaning:"three",lang:"Latin"},{part:"via",meaning:"road",lang:"Latin"}], evolution:["trivium (Lat)","trivialis (Lat)","trivial"], relatives:["trivia","via","deviate","voyage"], funFact:"Where three roads met, people chatted about unimportant things. In medieval universities, the 'trivium' was the 'easy' introductory curriculum." },
      { word:"candidate", def:"A person nominated for a position", pos:"noun", ipa:"/ˈkæn.dɪ.deɪt/", origin:"Latin", year:"1600s", etymology:"From Latin candidatus — 'one dressed in white'", roots:[{part:"candidus",meaning:"white, shining",lang:"Latin"},{part:"-atus",meaning:"clothed in",lang:"Latin"}], evolution:["candere (Lat)","candidus","candidatus","candidate"], relatives:["candid","candle","candor","incandescent","chandelier"], funFact:"Roman politicians wore whitened togas (toga candida) to symbolize purity. 'Candidate' = 'the one in the white toga.' Same root gives us 'candle.'" },
      { word:"companion", def:"A person one spends time with", pos:"noun", ipa:"/kəmˈpæn.jən/", origin:"Latin", year:"1300s", etymology:"From Latin companio — 'one who shares bread'", roots:[{part:"com-",meaning:"together",lang:"Latin"},{part:"panis",meaning:"bread",lang:"Latin"}], evolution:["com + panis (Lat)","companio","compaignon (OFr)","companion"], relatives:["company","accompany","pantry","panini"], funFact:"Your 'companion' is someone you break bread with. Even 'lord' comes from Old English hlāford: 'loaf-guardian.'" },
      { word:"vaccine", def:"A substance stimulating immunity", pos:"noun", ipa:"/ˈvæk.siːn/", origin:"Latin", year:"1799", etymology:"From Latin vaccinus — 'pertaining to cows'", roots:[{part:"vacca",meaning:"cow",lang:"Latin"},{part:"-inus",meaning:"of the nature of",lang:"Latin"}], evolution:["vacca (Lat)","vaccinus","vaccine (coined by Jenner)"], relatives:["vaccinate","vaccination","vaquero"], funFact:"Jenner noticed milkmaids who caught cowpox never got smallpox. Every time we say 'vaccine' we're literally saying 'cow stuff.'" },
      { word:"mortgage", def:"A loan secured against property", pos:"noun", ipa:"/ˈmɔːr.ɡɪdʒ/", origin:"Old French", year:"1390s", etymology:"From Old French mort gage — literally 'death pledge'", roots:[{part:"mort",meaning:"death",lang:"Old French"},{part:"gage",meaning:"pledge",lang:"Old French"}], evolution:["mors (Lat) + wadium (Gmc)","mort gage (OFr)","mortgage"], relatives:["mortal","mortuary","mortify","wage","wager"], funFact:"Called 'death pledge' because the deal 'dies' one way or another: debt paid (pledge dies) or payment fails (deal dies)." },
      { word:"gymnasium", def:"A building for physical exercise", pos:"noun", ipa:"/dʒɪmˈneɪ.zi.əm/", origin:"Greek", year:"1590s", etymology:"From Greek gymnasion — 'a place to exercise naked'", roots:[{part:"gymnos",meaning:"naked",lang:"Greek"},{part:"-asion",meaning:"place for",lang:"Greek"}], evolution:["gymnos (Grk)","gymnasion","gymnasium"], relatives:["gymnastics","gymnast","gymnosperm"], funFact:"Greek athletes trained completely nude. Plato's Academy and Aristotle's Lyceum were both gymnasia. Pine trees are 'gymnosperms' — 'naked seeds.'" },
      { word:"barbarian", def:"A person from an 'uncivilized' culture", pos:"noun", ipa:"/bɑːrˈbɛər.i.ən/", origin:"Greek", year:"1400s", etymology:"From Greek barbaros — imitating incomprehensible speech: 'bar-bar-bar'", roots:[{part:"barbaros",meaning:"foreign, one who babbles",lang:"Greek"}], evolution:["barbaros (Grk)","barbarus (Lat)","barbare (OFr)","barbarian"], relatives:["barbaric","barbarous","Barbary Coast"], funFact:"To Greeks, foreign languages sounded like 'bar bar bar.' Sanskrit barbara also means 'stammering.' One of history's oldest examples of linguistic ethnocentrism." },
      { word:"panic", def:"Sudden uncontrollable fear", pos:"noun", ipa:"/ˈpæn.ɪk/", origin:"Greek myth", year:"1600s", etymology:"From Greek panikos — 'of the god Pan'", roots:[{part:"Pan",meaning:"god of forests and wild nature",lang:"Greek"},{part:"-ikos",meaning:"pertaining to",lang:"Greek"}], evolution:["Pan (god)","panikos (Grk)","panicus (Lat)","panic"], relatives:["pandemic","panorama","panacea"], funFact:"Pan lurked in remote places causing sudden, irrational terror — especially at noon when forests went silent. Greeks blamed Pan for mysterious stampedes of herds." },
      { word:"supercilious", def:"Acting as though superior to others", pos:"adj", ipa:"/ˌsuː.pərˈsɪl.i.əs/", origin:"Latin", year:"1520s", etymology:"From Latin supercilium — literally 'eyebrow'", roots:[{part:"super-",meaning:"above",lang:"Latin"},{part:"cilium",meaning:"eyelid",lang:"Latin"}], evolution:["supercilium (Lat)","superciliosus (Lat)","supercilious"], relatives:["superb","superficial","cilia"], funFact:"The raised eyebrow is a universal gesture of condescension. Romans were so aware of this that 'eyebrow' became their word for arrogance itself." },
      { word:"galaxy", def:"A system of millions of stars", pos:"noun", ipa:"/ˈɡæl.ək.si/", origin:"Greek", year:"1380s", etymology:"From Greek galaxias kyklos — 'milky circle'", roots:[{part:"gala",meaning:"milk",lang:"Greek"},{part:"-xias",meaning:"pertaining to",lang:"Greek"}], evolution:["gala (Grk)","galaxias kyklos","galaxia (Lat)","galaxy"], relatives:["galactic","lactic","lactose","lettuce"], funFact:"In myth, baby Heracles was pushed from Hera's breast, spraying milk across the sky — creating the Milky Way. Greek gala and Latin lac are related, linking 'galaxy' and 'lactose.'" },
      { word:"amnesty", def:"An official pardon for offenses", pos:"noun", ipa:"/ˈæm.nə.sti/", origin:"Greek", year:"1570s", etymology:"From Greek amnēstia — 'forgetfulness, oblivion'", roots:[{part:"a-",meaning:"not, without",lang:"Greek"},{part:"mnēstis",meaning:"remembrance",lang:"Greek"}], evolution:["amnēstia (Grk)","amnestia (Lat)","amnistie (Fr)","amnesty"], relatives:["amnesia","mnemonic","Mnemosyne"], funFact:"Amnesty and amnesia are siblings — both mean 'forgetting.' Mnemosyne (Memory) was mother of the nine Muses — art springs from remembering." },
      { word:"inaugurate", def:"To begin formally or install in office", pos:"verb", ipa:"/ɪˈnɔː.ɡjʊ.reɪt/", origin:"Latin", year:"1600s", etymology:"From Latin inaugurare — 'to take omens from bird flight'", roots:[{part:"in-",meaning:"into",lang:"Latin"},{part:"augurare",meaning:"to divine from birds",lang:"Latin"}], evolution:["augur (Lat)","inaugurare (Lat)","inaugurer (Fr)","inaugurate"], relatives:["augur","augment","august"], funFact:"Romans read bird flight patterns before any important undertaking. Every presidential inauguration etymologically involves checking if the birds say it's okay." },
      { word:"sincere", def:"Free from pretense; genuine", pos:"adj", ipa:"/sɪnˈsɪər/", origin:"Latin", year:"1530s", etymology:"From Latin sincerus — 'clean, pure, whole'", roots:[{part:"sin-",meaning:"one",lang:"Latin"},{part:"-cerus",meaning:"growth",lang:"Latin"}], evolution:["sincerus (Lat)","sincère (Fr)","sincere"], relatives:["sincerity","sincerely"], funFact:"Folk etymology claims it's from 'sine cera' (without wax) — sculptors hiding marble flaws. Almost certainly false but wonderfully persistent." },
      { word:"ubiquitous", def:"Found everywhere", pos:"adj", ipa:"/juːˈbɪk.wɪ.təs/", origin:"Latin", year:"1830s", etymology:"From Latin ubique — 'everywhere'", roots:[{part:"ubi",meaning:"where",lang:"Latin"},{part:"-que",meaning:"universalizing suffix",lang:"Latin"}], evolution:["ubique (Lat)","ubiquitas (Med Lat)","ubiquitous"], relatives:["ubiquity","ubiquitously"], funFact:"In theology, 'ubiquity' described God's omnipresence. Entered everyday English in the 19th century when mass production made goods truly 'everywhere.'" },
      { word:"hippopotamus", def:"A large African semi-aquatic mammal", pos:"noun", ipa:"/ˌhɪp.əˈpɒt.ə.məs/", origin:"Greek", year:"1560s", etymology:"From Greek hippopotamos — 'river horse'", roots:[{part:"hippos",meaning:"horse",lang:"Greek"},{part:"potamos",meaning:"river",lang:"Greek"}], evolution:["hippos + potamos (Grk)","hippopotamus (Lat)","hippopotamus"], relatives:["hippodrome","Philip ('horse-lover')","Mesopotamia ('between rivers')","potable"], funFact:"The name 'Philip' shares the hippo- root — it means 'lover of horses.' Mesopotamia shares potamos — 'between rivers.' A hippodrome is where horses run." },
      { word:"decimate", def:"To destroy a large proportion of", pos:"verb", ipa:"/ˈdɛs.ɪ.meɪt/", origin:"Latin", year:"1600s", etymology:"From Latin decimare — 'to take a tenth'", roots:[{part:"decimus",meaning:"tenth",lang:"Latin"},{part:"-are",meaning:"to do",lang:"Latin"}], evolution:["decem (Lat,'ten')","decimare (Lat)","décimer (Fr)","decimate"], relatives:["decimal","December","decade","dime"], funFact:"Roman military punishment: kill every tenth soldier by lot. The word meant exactly 10% destruction. December was the 10th month before January and February were added." },
      { word:"cynic", def:"A person who distrusts human sincerity", pos:"noun", ipa:"/ˈsɪn.ɪk/", origin:"Greek", year:"1540s", etymology:"From Greek kynikos — 'dog-like'", roots:[{part:"kyon",meaning:"dog",lang:"Greek"}], evolution:["kyon (Grk)","kynikos (Grk)","cynicus (Lat)","cynic"], relatives:["cynical","canine","kennel"], funFact:"The philosopher Diogenes lived like a dog — sleeping in a barrel, eating scraps, performing bodily functions in public. His followers were called 'dog philosophers.' Same root gives us 'canine.'" },
      { word:"enthusiasm", def:"Intense enjoyment or eager interest", pos:"noun", ipa:"/ɪnˈθjuː.zi.æz.əm/", origin:"Greek", year:"1600s", etymology:"From Greek enthousiasmos — 'divine possession, to be inspired by a god'", roots:[{part:"en-",meaning:"in",lang:"Greek"},{part:"theos",meaning:"god",lang:"Greek"}], evolution:["en + theos (Grk)","enthousiasmos","enthusiasm"], relatives:["enthusiast","theology","theocracy","atheist","pantheon"], funFact:"Originally meant 'possessed by a god.' Being enthusiastic was literally having a deity inside you. Initially used negatively — religious fanatics were called 'enthusiasts.'" },
      { word:"diploma", def:"A certificate of academic achievement", pos:"noun", ipa:"/dɪˈploʊ.mə/", origin:"Greek", year:"1640s", etymology:"From Greek diploma — 'a paper folded double'", roots:[{part:"diploun",meaning:"to fold double",lang:"Greek"},{part:"di-",meaning:"two",lang:"Greek"}], evolution:["diploun (Grk)","diploma (Lat)","diploma (Eng)"], relatives:["diplomat","diplomacy","diploid","double"], funFact:"Roman passports and official documents were folded in two and sealed. The word for these folded papers became 'diploma.' A 'diplomat' is literally someone who carries folded papers." },
      { word:"rival", def:"A person competing with another", pos:"noun", ipa:"/ˈraɪ.vəl/", origin:"Latin", year:"1570s", etymology:"From Latin rivalis — 'one using the same stream as another'", roots:[{part:"rivus",meaning:"stream, brook",lang:"Latin"}], evolution:["rivus (Lat)","rivalis (Lat)","rival (Fr)","rival"], relatives:["river","rivulet","derive","arrive"], funFact:"Neighbors sharing a stream (rivus) inevitably argued over water rights, making them 'rivals.' The concept of competition literally flows from disputes over water." },
      { word:"calculate", def:"To determine by mathematical process", pos:"verb", ipa:"/ˈkæl.kjʊ.leɪt/", origin:"Latin", year:"1560s", etymology:"From Latin calculare — 'to reckon by means of pebbles'", roots:[{part:"calculus",meaning:"small stone, pebble",lang:"Latin"}], evolution:["calx (Lat,'limestone')","calculus (Lat,'pebble')","calculare","calculate"], relatives:["calculus","calcium","chalk"], funFact:"Romans used small stones (calculi) on counting boards — an abacus made of pebbles. Higher math is still called 'calculus.' And 'calcium' is theite mineral in those stones." },
      { word:"Antarctica", def:"The southernmost continent", pos:"noun", ipa:"/ænˈtɑːrk.tɪ.kə/", origin:"Greek", year:"1300s", etymology:"From Greek antarktikos — 'opposite the bear (constellation)'", roots:[{part:"anti-",meaning:"opposite",lang:"Greek"},{part:"arktos",meaning:"bear",lang:"Greek"}], evolution:["arktos (Grk,'bear')","arktikos (Grk)","antarktikos","Antarctica"], relatives:["Arctic","Ursa Major","Arthur (possibly)"], funFact:"The Arctic is named for the Great Bear constellation (Ursa Major) visible in the north. Antarctica is 'anti-Arctic' — opposite the bear. The name King Arthur may also derive from arktos." },
      { word:"vaccine", def:"A substance stimulating immunity", pos:"noun", ipa:"/ˈvæk.siːn/", origin:"Latin", year:"1799", etymology:"From Latin vaccinus — 'pertaining to cows'", roots:[{part:"vacca",meaning:"cow",lang:"Latin"},{part:"-inus",meaning:"of the nature of",lang:"Latin"}], evolution:["vacca (Lat)","vaccinus","vaccine"], relatives:["vaccinate","vaccination","vaquero"], funFact:"Jenner noticed milkmaids who caught cowpox never got smallpox. 'Vaccine' literally means 'cow stuff.'" },
      { word:"helicopter", def:"An aircraft with rotating blades", pos:"noun", ipa:"/ˈhɛl.ɪˌkɒp.tər/", origin:"Greek", year:"1861", etymology:"From Greek helix + pteron — 'spiral wing'", roots:[{part:"helix",meaning:"spiral",lang:"Greek"},{part:"pteron",meaning:"wing",lang:"Greek"}], evolution:["helix + pteron (Grk)","hélicoptère (Fr)","helicopter"], relatives:["helix","pterodactyl","pteranodon","archaeopteryx","diptera"], funFact:"Most people split it as 'heli-copter' but etymologically it's 'helico-pter' — spiral wing. Pteron also gives us pterodactyl ('wing finger') and all the -ptera insect orders." },
      { word:"dandelion", def:"A yellow wildflower with toothed leaves", pos:"noun", ipa:"/ˈdæn.dɪˌlaɪ.ən/", origin:"French", year:"1300s", etymology:"From French dent de lion — 'lion's tooth'", roots:[{part:"dent",meaning:"tooth",lang:"French/Latin"},{part:"de",meaning:"of",lang:"French"},{part:"lion",meaning:"lion",lang:"French/Latin"}], evolution:["dens leonis (Lat)","dent de lion (Fr)","dandelion"], relatives:["dental","dentist","trident","Leo","lion"], funFact:"Named for the jagged, tooth-shaped leaves, not the flower. In nearly every European language it references teeth: German Löwenzahn ('lion tooth'), Italian dente di leone." },
      { word:"checkmate", def:"A winning position in chess", pos:"noun", ipa:"/ˈtʃɛk.meɪt/", origin:"Persian/Arabic", year:"1300s", etymology:"From Persian shāh māt — 'the king is dead/helpless'", roots:[{part:"shāh",meaning:"king",lang:"Persian"},{part:"māt",meaning:"dead, helpless",lang:"Arabic"}], evolution:["shāh māt (Persian)","escec mat (OFr)","checkmate"], relatives:["check","chess","shah","exchequer"], funFact:"Chess traveled from India to Persia to Arabia to Europe. 'Check' itself comes from shāh (king). The Exchequer (British treasury) is named for a checkered counting cloth." }
    ];

    // Deduplicate
    const seen = new Set();
    const WORDS = WORD_BANK.filter(w => { if (seen.has(w.word)) return false; seen.add(w.word); return true; });

    /* ═══════════════════════════════════════════════════════════════════════════
       UTILITIES
       ═══════════════════════════════════════════════════════════════════════════ */
    const getDayKey = () => { const d = new Date(); return `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`; };
    const getPrevDayKey = () => { const d = new Date(); d.setDate(d.getDate()-1); return `${d.getFullYear()}-${d.getMonth()}-${d.getDate()}`; };

    const seededRng = (seed) => {
      let s = 0;
      for (let i = 0; i < seed.length; i++) s = ((s << 5) - s + seed.charCodeAt(i)) | 0;
      return () => { s = (s * 16807) % 2147483647; return (s & 0x7fffffff) / 0x7fffffff; };
    };

    const shuffle = (arr, rng) => {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(rng() * (i + 1));[a[i], a[j]] = [a[j], a[i]]; }
      return a;
    };

    const speak = (text) => {
      if (!window.speechSynthesis) return;
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.rate = 0.8; window.speechSynthesis.speak(u);
    };

    /* ═══════════════════════════════════════════════════════════════════════════
       SOUND FX (Web Audio API)
       ═══════════════════════════════════════════════════════════════════════════ */
    let audioCtx = null;
    const getAudio = () => { if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); return audioCtx; };

    const playSound = (type) => {
      try {
        const ctx = getAudio();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        gain.gain.value = 0.12;

        if (type === "correct") {
          osc.type = "sine"; osc.frequency.value = 520;
          osc.frequency.setValueAtTime(520, ctx.currentTime);
          osc.frequency.linearRampToValueAtTime(780, ctx.currentTime + 0.08);
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.2);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.2);
        } else if (type === "wrong") {
          osc.type = "sawtooth"; osc.frequency.value = 180;
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.25);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.25);
        } else if (type === "combo") {
          osc.type = "sine"; osc.frequency.value = 600;
          osc.frequency.setValueAtTime(600, ctx.currentTime);
          osc.frequency.linearRampToValueAtTime(1200, ctx.currentTime + 0.15);
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.3);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.3);
        } else if (type === "levelup") {
          [0, 0.1, 0.2].forEach((t, i) => {
            const o = ctx.createOscillator(); const g = ctx.createGain();
            o.connect(g); g.connect(ctx.destination);
            o.type = "sine"; o.frequency.value = 500 + i * 200; g.gain.value = 0.1;
            g.gain.linearRampToValueAtTime(0, ctx.currentTime + t + 0.15);
            o.start(ctx.currentTime + t); o.stop(ctx.currentTime + t + 0.15);
          });
        } else if (type === "tick") {
          osc.type = "sine"; osc.frequency.value = 900;
          gain.gain.value = 0.06;
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.04);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.04);
        } else if (type === "timeup") {
          osc.type = "square"; osc.frequency.value = 300;
          osc.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.4);
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.4);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.4);

        } else if (type === "learn_start") {
          // Warm drone triad — A2 + E3 + A3, slow swell, meditative
          [110, 165, 220].forEach((freq) => {
            const o = ctx.createOscillator(); const g = ctx.createGain();
            o.connect(g); g.connect(ctx.destination);
            o.type = "sine"; o.frequency.value = freq;
            g.gain.setValueAtTime(0, ctx.currentTime);
            g.gain.linearRampToValueAtTime(0.052, ctx.currentTime + 0.4);
            g.gain.linearRampToValueAtTime(0.032, ctx.currentTime + 0.75);
            g.gain.linearRampToValueAtTime(0, ctx.currentTime + 1.2);
            o.start(ctx.currentTime); o.stop(ctx.currentTime + 1.2);
          });
        } else if (type === "learn_card") {
          // Soft papery page-turn flick
          osc.type = "sine"; osc.frequency.value = 300;
          osc.frequency.linearRampToValueAtTime(460, ctx.currentTime + 0.055);
          gain.gain.value = 0.042;
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.085);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.085);

        } else if (type === "quiz_start") {
          // Ascending C-major arpeggio: C4 → E4 → G4 → C5
          [262, 330, 392, 524].forEach((freq, i) => {
            const t = ctx.currentTime + i * 0.09;
            const o = ctx.createOscillator(); const g = ctx.createGain();
            o.connect(g); g.connect(ctx.destination);
            o.type = "sine"; o.frequency.value = freq;
            g.gain.setValueAtTime(i === 3 ? 0.1 : 0.07, t);
            g.gain.linearRampToValueAtTime(0, t + (i === 3 ? 0.28 : 0.14));
            o.start(t); o.stop(t + 0.3);
          });

        } else if (type === "speed_go") {
          // Energetic rising sawtooth sweep then a bright ping
          osc.type = "sawtooth"; osc.frequency.value = 150;
          osc.frequency.linearRampToValueAtTime(700, ctx.currentTime + 0.16);
          gain.gain.value = 0.07;
          gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.2);
          osc.start(ctx.currentTime); osc.stop(ctx.currentTime + 0.2);
          // Bright ping on top
          const o2 = ctx.createOscillator(); const g2 = ctx.createGain();
          o2.connect(g2); g2.connect(ctx.destination);
          o2.type = "sine"; o2.frequency.value = 1046;
          g2.gain.setValueAtTime(0.09, ctx.currentTime + 0.14);
          g2.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.32);
          o2.start(ctx.currentTime + 0.14); o2.stop(ctx.currentTime + 0.32);

        } else if (type === "results") {
          // Warm sustained A-major chord — A3 C#4 E4 A4 — gentle swell
          [220, 277, 330, 440].forEach((freq) => {
            const o = ctx.createOscillator(); const g = ctx.createGain();
            o.connect(g); g.connect(ctx.destination);
            o.type = "sine"; o.frequency.value = freq;
            g.gain.setValueAtTime(0, ctx.currentTime);
            g.gain.linearRampToValueAtTime(0.052, ctx.currentTime + 0.3);
            g.gain.linearRampToValueAtTime(0.038, ctx.currentTime + 0.9);
            g.gain.linearRampToValueAtTime(0, ctx.currentTime + 1.5);
            o.start(ctx.currentTime); o.stop(ctx.currentTime + 1.5);
          });
        }
      } catch (e) {}
    };

    /* ═══════════════════════════════════════════════════════════════════════════
       XP & LEVEL SYSTEM
       ═══════════════════════════════════════════════════════════════════════════ */
    const XP_PER_CORRECT = 10;
    const XP_COMBO_BONUS = 5;    // per combo level
    const XP_SPEED_BONUS = 15;   // for speed round correct
    const XP_PERFECT_BONUS = 50;

    const xpForLevel = (lvl) => 50 + (lvl - 1) * 30;

    const TITLES = [
      "Novice Etymologist", "Word Apprentice", "Root Seeker", "Lexicon Scout",
      "Language Archaeologist", "Etymology Adept", "Philological Scholar",
      "Word Origin Master", "Linguistic Sage", "Grandmaster Etymologist"
    ];

    const getTitle = (level) => TITLES[Math.min(level - 1, TITLES.length - 1)];

    /* ═══════════════════════════════════════════════════════════════════════════
       QUIZ GENERATION
       ═══════════════════════════════════════════════════════════════════════════ */
    const ROOT_MEANINGS_POOL = [
      "war, conflict","water, sea","fire, heat","stone, rock","love, desire","king, ruler",
      "earth, land","time, age","life, living","death, dying","light, bright","dark, shadow",
      "hand, touch","eye, sight","voice, speak","tree, wood","blood, red","wind, breath",
      "gold, wealth","child, young","field, plain","song, sing","ship, sail","fear, dread",
      "truth, real","sleep, dream","city, town","law, rule","write
